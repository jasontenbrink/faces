app.directive('createFamily', ['AddressService', function(AddressService){
  return {
    restrict: "E",
    scope: {
      address: '='
    },
    templateUrl: 'assets/views/directives/create-family.html',
    controller: 'CreateFamilyController',
    link: function (scope) {
      // var addressService = AddressService;
      // var tempAddress = Object.assign({}, scope.address);
      // console.log('address obj: ', scope.address);
      // scope.isDisabled = true;
      //
      // scope.submitRegistration = function (form) {
      //   if (form.$valid){
      //     addressService.updateAddress(scope.address).then(
      //       function (response) {
      //         scope.isDisabled = !scope.isDisabled;
      //       });
      //   }
      // };
      //
      // scope.cancel = function(){
      //   Object.assign(scope.address, tempAddress);
      //   scope.isDisabled = !scope.isDisabled;
      // };
    }
  };
}]);

app.directive('displayMember',['uiGridConstants',
  function () {
    return {
      restrict: 'E',
      scope: {
        gridOptions: '=',
        data: '='
      },
      templateUrl: 'assets/views/directives/display-members.html'
    };
  }
]);

app.directive('editableAddress', ['AddressService', function(AddressService){
  return {
    restrict: "E",
    scope: {
      address: '='
    },
    templateUrl: 'assets/views/directives/editable-address.html',
    link: function (scope) {
      var addressService = AddressService;
      var tempAddress = Object.assign({}, scope.address);
      console.log('address obj: ', scope.address);
      scope.isDisabled = true;
      
      scope.submitRegistration = function (form) {
        if (form.$valid){
          addressService.updateAddress(scope.address).then(
            function (response) {
              scope.isDisabled = !scope.isDisabled;
            });
        }
      };

      scope.cancel = function(){
        Object.assign(scope.address, tempAddress);
        scope.isDisabled = !scope.isDisabled;
      };
    }
  };
}]);

app.directive('joinFamily', ['$http', function ($http) {
  return {
    restrict: "E",
    scope: {

    },
    templateUrl: 'assets/views/directives/join-family.html',
    link: link
  };
  function link(scope){
    scope.people = ['john', 'ringo'];
    scope.logToConsole = function(param){
      console.log(param);
    };

  }
}]);

app.directive('profile', ['MemberService', function(MemberService){
  return {
    restrict: "E",
    scope: {
      user: '='
    },
    templateUrl: 'assets/views/directives/profile.html',
    link: function (scope) {
      var memberService = MemberService;
      var tempUser = Object.assign({}, scope.user);
      scope.isDisabled = true;
      scope.submitRegistration = function (form) {
        if (form.$valid){
          memberService.postMember(scope.user).then(
            function (response) {
              scope.isDisabled = !scope.isDisabled;
              console.log(tempUser.age);
            });
        }
      };

      scope.cancel = function(){
        Object.assign(scope.user, tempUser);
        scope.isDisabled = !scope.isDisabled;
      };
    }
  };
}]);

app.directive('registration', ['$http', function ($http) {
  return {
    restrict: "E",
    scope: {

    },
    templateUrl: 'assets/views/directives/registration.html',
    link: link
  };
  function link(scope){
    scope.user = {email:"",
                  firstName:"",
                  lastName: "",
                  gender: "",
                  age: "",
                  electronic_newsletter: 'true'
                };
    scope.submitRegistration = function (form) {
      if (form.$valid){
        console.log('heading out on postMemberAdmin');
        $http.post('/postMemberAdmin', scope.user).then(
          function (response) {
            console.log(response);
          });
      }
    };
    // var address = {};
    // var addressService = AddressService;
    // var memberService = MemberService;
    // scope.submitRegistration = function(){
    //   memberService.postMember(user).then(
    //     function (response) {
    //       addressService.postAddress(user).then(
    //         function (response) {
    //           console.log(response);
    //         });
    //     });
    //
    // };
  }
}]);

app.directive('searchForPeople',['DataService',
  function (DataService) {
    return {
      restrict: 'E',
      scope: {
        searchResult: '='
      },
      templateUrl: 'assets/views/directives/search-for-people.html',
      link: function (scope, elements, attrs, controllers) {
        scope.searchResult = [];
        scope.searchObject = new SearchObject();
        scope.initialShow = true;
        scope.onOrOff = false;

        scope.toggle = function () {
          scope.onOrOff = !scope.onOrOff;
          scope.initialShow = false;
        };

        var dataService = DataService;

        scope.fetchData = function(searchObject) {
          dataService.retrieveData(searchObject)
            .then(function () {
              scope.searchResult = dataService.peopleData();
            });
            scope.toggle();
        };
        function SearchObject() {
          this.first_name='';
          this.last_name='';
          this.email='';
          this.phone='';
        }
      }
    };
  }
]);
